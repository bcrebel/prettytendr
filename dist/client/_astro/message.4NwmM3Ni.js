import{r as c}from"./index.RYns6xqu.js";let n=[],r=0;const a=4;let o=i=>{let s=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=s.push(t),()=>{for(let u=r+a;u<n.length;)n[u]===t?n.splice(u,a):u+=a;let l=s.indexOf(t);~l&&(s.splice(l,1),--e.lc||e.off())}},notify(t,l){let u=!n.length;for(let f of s)n.push(f,e.value,t,l);if(u){for(r=0;r<n.length;r+=a)n[r](n[r+1],n[r+2],n[r+3]);n.length=0}},off(){},set(t){let l=e.value;l!==t&&(e.value=t,e.notify(l))},subscribe(t){let l=e.listen(t);return t(e.value),l},value:i};return e};function y(i,s,e){let t=new Set([...s,void 0]);return i.listen((l,u,f)=>{t.has(f)&&e(l,u,f)})}function b(i,s={}){let e=c.useCallback(l=>s.keys?y(i,s.keys,l):i.listen(l),[s.keys,i]),t=i.get.bind(i);return c.useSyncExternalStore(e,t,t)}const d=o("");export{o as a,d as m,b as u};
